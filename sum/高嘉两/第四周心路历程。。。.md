### 第四周总结  
这一周是倒数第二周，感觉挺想回家的。。。  
这周开始大概看了CS模型，感觉直接连接上并不是很难，但是连接以后进行的操作就比较麻烦了。开始一直不知道TCP套件字是流结构，所以关于recv一直都有好多问题，比如周五讲座说的粘包，分包。这导致在做聊天室时候一直错误。这是一个大坑。  
之后就一直在看JSON,数据库，IO多路复用等。但是上网看来的终究不是很细致，每一个看起来都是很吃力，更不用说使用。好多都是仿照网上的代码实验，错了改，不对再改。一个小问题就要改上好久。更麻烦的是将这些内容结合在一起，问题就又变出各种花样。JSON稍微简单一点，要清楚他的构造和解析，但是一直没感觉JSON有什么用。数据库的返回值一直是个谜，到现在都是一遍敲，一遍试探性的改，突然好了也就好了，并不清楚是为什么。关于多路复用如果能理解他的思想就还好。但是比较麻烦的是当他和多线程结合在一起的时候就十分难受了。尤其是因为这个问题，我整整写了一天，改了三次方案。最后因为以上各种问题和一个BUG，导致我放弃了我一礼拜的成果。其实就是对各种知识知道的不全，融合在一起使用就出问题。  
周五后打算写一个简单的，把那先所谓的进阶都去掉，是在又是一天的操作后宫学长说我的新思路不对。在探讨之后，我决定将之前的那个版本拿起来，还是按照那个思路重改。好在周五的讲座后对各个方面的问题有了进一步的了解，所以发现了之前的错误。现在的问题是感觉这个聊天室要做完太庞大，太杂。功能太多要写很多处理函数。
对于每一个客户端的各种请求，如：登陆，注册，获取好友，获取好友在线请况，获取离线消息，获取好友详细情况，发消息，发邀请，获取群链表，获取群信息，获取群会话记录，修改个人信息等等。。。所有的操作都要在客户单独写函数端接收，转化为JSON，无误的传到服务端，服务端解析JSON，进入对应的处理函数，然后对数据库处理，再接收数据库返回信息。再转化为JSON，在发回客户端，再解析，然后做对应操作。而且在这一堆操作里，还要小心线程池里对临界资源的操作，锁加少保护不够，加多了又导致线程阻塞，效率低下。  
感觉内容太多。。。感觉回不了家。。。  
这周总体来说就是一直在学，但是又学不精，一些坑点掌握不到，一直出问题。  
没有前几周的项目轻松，感觉一个人做一个完整的，做好一个小软件还是比较麻烦的。  
希望下周顺利，希望早点回家。。。  
宿舍没网。。。明天再传github吧。。。  

